(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6cb43366"],{"612c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"warp"},[s("div",{staticStyle:{display:"none"}},[s("img",{ref:"iconNone",attrs:{src:a("8be0"),alt:"",sizes:"",srcset:""}}),s("img",{ref:"iconSelected",attrs:{src:a("f1b0"),alt:"",sizes:"",srcset:""}})]),s("div",{staticClass:"top clear"},[s("router-link",{attrs:{to:"/svg_to_svg"}},[e._v("toMap")]),s("img",{ref:"iconShow",attrs:{src:a("cf41"),alt:"",sizes:"",srcset:"",id:"500"}}),s("button",{on:{click:function(t){e.checkedShapeShow=!0}}},[e._v("修改区域座位信息")])],1),s("div",{staticClass:"bottom clear"},[s("div",{staticClass:"content-warp"},[s("div",{ref:"content",staticClass:"content"},[s("div",{ref:"svgWarp",staticClass:"svg-warp",domProps:{innerHTML:e._s(e.svg)}})])]),s("div",{ref:"activeArea",staticClass:"active-area"},[s("div",{staticClass:"active-top",style:{height:e.activeTop+"px"}},[s("p",[e._v("shapeId:"+e._s(e.checkedShape.shapeId)+" cols:"+e._s(e.checkedShape.cols)+" rows:"+e._s(e.checkedShape.rows))]),s("div",{staticClass:"btns"},[s("button",{attrs:{disabled:0==e.selectedSeatList.length},on:{click:e.addSeat}},[e._v("添加座位")]),s("button",{attrs:{disabled:0==e.selectedSeatList.length},on:{click:e.removeSeat}},[e._v("删除座位")]),s("button",{attrs:{disabled:0==e.selectedSeatList.length},on:{click:e.cancleSeleced}},[e._v("取消选择")])]),s("div",{staticClass:"cols-span",style:{left:e.activeLeft+e.seatCanvas.paddingLeft+e.seatCanvas.left+"px"},on:{mouseout:function(t){e.hoverPinkBox.width=0,e.hoverPinkBox.height=0}}},e._l(e.checkedShape.cols,(function(t,a){return s("span",{key:a,on:{click:function(t){return e.checkedRowsOrCols(a,!1)},mouseover:function(t){return e.hoverRowsOrCols(a,!1)}}},[e._v(e._s(e.checkedShape.startCol+a)+" 列")])})),0)]),s("div",{staticClass:"active-left",style:{width:e.activeLeft+"px",paddingTop:e.seatCanvas.paddingTop+"px"}},[s("div",{staticClass:"rows-span",style:{top:e.seatCanvas.paddingTop+e.seatCanvas.top+"px"},on:{mouseout:function(t){e.hoverPinkBox.width=0,e.hoverPinkBox.height=0}}},e._l(e.checkedShape.rows,(function(t,a){return s("span",{key:a,on:{click:function(t){return e.checkedRowsOrCols(a,!0)},mouseover:function(t){return e.hoverRowsOrCols(a,!0)}}},[e._v(e._s(e.checkedShape.startRow+a)+" 排")])})),0)]),s("div",{ref:"seatCanvasWarp",staticClass:"seat-canvas-warp"},[s("canvas",{directives:[{name:"show",rawName:"v-show",value:null!=e.checkedShape.shapeId&&!e.checkedShapeShow,expression:"checkedShape.shapeId!=null&&!checkedShapeShow"}],ref:"seatCanvas",staticClass:"seat-canvas",attrs:{id:"seatCanvas"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedBox.width>0&&e.selectedBox.height>0&&!e.checkedShapeShow,expression:"selectedBox.width>0&&selectedBox.height>0&&!checkedShapeShow"}],ref:"selectedBox",staticClass:"selected-box",style:{width:e.selectedBox.width+"px",height:e.selectedBox.height+"px",top:e.selectedBox.top+"px",left:e.selectedBox.left+"px"}},[e._v("selectedBox")]),s("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.hoverPinkBox.width,expression:"hoverPinkBox.width!=0"}],ref:"hoverPinkBox",staticClass:"hover-box",style:{width:e.hoverPinkBox.width+"px",height:e.hoverPinkBox.height+"px",top:e.hoverPinkBox.top+"px",left:e.hoverPinkBox.left+"px"}},[e._v("hoverPinkBox")]),s("div",{ref:"onlyForAction",staticClass:"only-for-action",style:{width:e.seatCanvas.width+"px",height:e.seatCanvas.height+"px"}})])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedShapeShow,expression:"checkedShapeShow"}],staticClass:"pop"},[s("div",{staticClass:"pop-content"},[s("h4",[s("span",[e._v("行：")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.checkedShapePopData.rows,expression:"checkedShapePopData.rows",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.checkedShapePopData.rows},on:{input:function(t){t.target.composing||e.$set(e.checkedShapePopData,"rows",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("h4",[s("span",[e._v("列：")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.checkedShapePopData.cols,expression:"checkedShapePopData.cols",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.checkedShapePopData.cols},on:{input:function(t){t.target.composing||e.$set(e.checkedShapePopData,"cols",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("h4",[s("span",[e._v("排座-起始行：")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.checkedShapePopData.startRow,expression:"checkedShapePopData.startRow",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.checkedShapePopData.startRow},on:{input:function(t){t.target.composing||e.$set(e.checkedShapePopData,"startRow",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("h4",[s("span",[e._v("排座-起始列（座）：")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.checkedShapePopData.startCol,expression:"checkedShapePopData.startCol",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.checkedShapePopData.startCol},on:{input:function(t){t.target.composing||e.$set(e.checkedShapePopData,"startCol",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("h4",[s("span",[e._v("横向排序方向：")]),s("em",{staticClass:"radio",class:{checked:0==e.checkedShapePopData.orderRow},on:{click:function(t){e.checkedShapePopData.orderRow=0}}},[e._v("逆时针")]),s("em",{staticClass:"radio",class:{checked:1==e.checkedShapePopData.orderRow},on:{click:function(t){e.checkedShapePopData.orderRow=1}}},[e._v("顺时针")])]),s("h4",[s("span",[e._v("竖直排序方向：")]),s("em",{staticClass:"radio",class:{checked:0==e.checkedShape.orderCol},on:{click:function(t){e.checkedShapePopData.orderCol=0}}},[e._v("由里向外")]),s("em",{staticClass:"radio",class:{checked:1==e.checkedShapePopData.orderCol},on:{click:function(t){e.checkedShapePopData.orderCol=1}}},[e._v("由外向里")])]),s("h4",[s("button",{on:{click:e.checkedShapeSeatComfrim}},[e._v("确认")]),s("button",{on:{click:e.checkedShapeSeatCancle}},[e._v("取消")])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.hoverInfo.show,expression:"hoverInfo.show"}],staticClass:"hover-info",style:{left:e.hoverInfo.left+"px",top:e.hoverInfo.top+"px"}},[s("span",[e._v(e._s(e.hoverInfo.text))]),s("div")])])},i=[],h=(a("cb29"),a("4160"),a("c975"),a("d81d"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("159b"),a("2909")),n=a("5530"),o=a("b893"),c=(a("cf45"),null),r=null,d=null,p={name:"",components:{},data:function(){return{pageVisible:!0,errorRange:50,seatCanvasWarp:{dom:null,offsetLeft:0,offsetTop:0},seatCanvas:{dom:"",ctx:null,width:0,height:0,paddingLeft:20,paddingTop:20,seatWdith:20,seatHeight:20,seatMarginRight:5,seatMarginBottom:5,top:0,left:0},selectCanvas:{dom:"",ctx:null},activeTop:100,activeLeft:50,selectedBox:{width:0,height:0,top:0,left:0},selectedSeatList:[],hoverPinkBox:{width:0,height:0,top:0,left:0},hoverInfo:{show:!1,text:"",top:0,left:0},canvasSplit:{row:7,col:7},canvasList:[],batchAction:!1,wheelMax:1.3,wheelNum:0,wheelMin:0,center:{find:!1,x:0,y:0},canvas:{left:0,top:0},svg:"",maxWidth:0,maxHeight:0,setWidth:0,setHeight:0,minWidth:0,minHeight:0,position:{left:0,top:0},cont:{width:0,height:0,offsetLeft:0,offsetTop:0,center:[]},miniMap:{show:!0,width:0,height:0},checkBox:{width:0,height:0,top:0,left:0},seatIcon:{iconShow:"",iconNone:"",width:20,height:20,marginRight:5,marginBottom:5},checkedShapeShow:!1,checkedShapePopData:{shapeId:null,rows:0,cols:0,startRow:0,startCol:0,orderRow:0,orderCol:0},checkedShape:{shapeId:null,rows:0,cols:0,startRow:0,startCol:0,orderRow:0,orderCol:0},checkedShapeIdx:null,shapeList:[],renderList:[],viewBoxList:[]}},computed:{},watch:{shapeList:{handler:function(e){this.saveAction()},deep:!0},checkedShape:{handler:function(e,t){if(e.shapeId==t.shapeId&&e.cols==t.cols&&e.rows==t.rows)return!1;0==e.cols||0==e.rows?this.checkedShapeShow=!0:this.drawSeatCanvas(e)},deep:!0}},created:function(){c=this,localStorage.getItem("shapeList")&&(this.shapeList=JSON.parse(localStorage.getItem("shapeList"))),localStorage.getItem("seatIcon")&&(this.seatIcon=JSON.parse(localStorage.getItem("seatIcon")))},mounted:function(){this.pageInit()},beforeDestroy:function(){},methods:{pageInit:function(){var e=this;this.svg=_svg,this.seatCanvasInit(),this.$nextTick((function(){e.svgInit()}))},seatCanvasInit:function(){this.seatCanvasWarp.dom=this.$refs.seatCanvasWarp,this.seatCanvasWarp.dom.addEventListener("scroll",this.seatCanvasWarpScroll),this.seatCanvasWarp.offsetLeft=this.seatCanvasWarp.dom.offsetLeft,this.seatCanvasWarp.offsetTop=this.seatCanvasWarp.dom.offsetTop,this.seatCanvas.dom=this.$refs.seatCanvas,this.seatCanvas.ctx=this.$refs.seatCanvas.getContext("2d"),this.seatCanvasBindAction()},seatCanvasBindAction:function(){var e=this.$refs.onlyForAction;e.onmousedown=function(t){c.selectedBox.width=0,c.selectedBox.height=0;var a=t.clientX-c.seatCanvasWarp.offsetLeft-c.seatCanvas.left,s=t.clientY-c.seatCanvasWarp.offsetTop-c.seatCanvas.top,i=[a,s],h=c.seatCanvas.seatWdith+c.seatCanvas.seatMarginRight,n=c.seatCanvas.seatHeight+c.seatCanvas.seatMarginBottom,o=c.checkedShape.cols*h+2*c.seatCanvas.paddingLeft-c.seatCanvas.seatMarginRight,r=c.checkedShape.rows*n+2*c.seatCanvas.paddingTop-c.seatCanvas.seatMarginBottom;e.onmousemove=function(e){var t=e.clientX-a-c.seatCanvasWarp.offsetLeft-c.seatCanvas.left,h=e.clientY-s-c.seatCanvasWarp.offsetTop-c.seatCanvas.top;a+t>o&&(t=o-a),s+h>r&&(h=r-s),c.selectedBox.left=t>0?a:a-Math.abs(t),c.selectedBox.top=h>0?s:s-Math.abs(h),i=[c.selectedBox.left,c.selectedBox.top],Math.abs(t)>20&&Math.abs(h)>20&&(c.selectedBox.width=Math.abs(t),c.selectedBox.height=Math.abs(h))},e.onmouseup=function(t){e.onmousemove=null,e.onmouseup=null,e.onmouseout=null,c.endAction(i,h,n)},e.onmouseout=function(t){e.onmousemove=null,e.onmouseup=null,e.onmouseout=null,c.endAction(i,h,n)}}},endAction:function(e,t,a){if(0==this.selectedBox.width&&0==this.selectedBox.height){for(var s=[],i=0;i<this.checkedShape.cols;i++){for(var h=i*t+this.seatCanvas.paddingLeft,c=0;c<this.checkedShape.rows;c++){var r=c*a+this.seatCanvas.paddingTop,d=[h+this.seatCanvas.seatWdith/2,r+this.seatCanvas.seatHeight/2];if(o["a"].getDisance1(d,e)<this.seatCanvas.seatWdith/2){s=[c,i];break}if(0!=s.length)break}if(0!=s.length)break}if(0==s.length)return!1;var p=s[1]*t+this.seatCanvas.paddingLeft,l=s[0]*a+this.seatCanvas.paddingTop;if(0!=this.selectedSeatList.length){for(var v=-1,u=0;u<this.selectedSeatList.length;u++){var f=this.selectedSeatList[u];if(f.toString()==s.toString()){v=u;break}}-1!=v?(this.seatCanvas.ctx.beginPath(),0==this.checkedShape.seats[s[0]][s[1]].status?this.seatCanvas.ctx.drawImage(this.seatIcon.iconShow,p,l,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight):-1==this.checkedShape.seats[s[0]][s[1]].status&&this.seatCanvas.ctx.drawImage(this.seatIcon.iconNone,p,l,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight),this.$delete(this.selectedSeatList,v)):(this.seatCanvas.ctx.beginPath(),this.seatCanvas.ctx.drawImage(this.seatIcon.iconSelected,p,l,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight),this.selectedSeatList.push(s))}else{this.seatCanvas.seatWdith,this.seatCanvas.seatHeight;0==this.checkedShape.seats[s[0]][s[1]].status?this.checkedShape.seats[s[0]][s[1]].status=-1:this.checkedShape.seats[s[0]][s[1]].status=0,this.seatCanvas.ctx.beginPath(),0==this.checkedShape.seats[s[0]][s[1]].status?this.seatCanvas.ctx.drawImage(this.seatIcon.iconShow,p,l,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight):-1==this.checkedShape.seats[s[0]][s[1]].status&&this.seatCanvas.ctx.drawImage(this.seatIcon.iconNone,p,l,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight),this.checkedShape=this.orderSeats(Object(n["a"])({},this.checkedShape)),this.$set(this.shapeList,this.checkedShapeIdx,Object(n["a"])({},this.checkedShape))}}else{for(var g,C=[e[0]+this.selectedBox.width,e[1]+this.selectedBox.height],S=[],k=0;k<this.checkedShape.cols;k++)for(var m=k*t+this.seatCanvas.paddingLeft,w=0;w<this.checkedShape.rows;w++){var x=w*a+this.seatCanvas.paddingTop,b=[m,x],I=[m+this.seatCanvas.seatWdith,x+this.seatCanvas.seatHeight];b[0]>=e[0]&&b[0]<=C[0]&&I[0]>=e[0]&&I[0]<=C[0]&&b[1]>=e[1]&&b[1]<=C[1]&&I[1]>=e[1]&&I[1]<=C[1]&&(this.seatCanvas.ctx.beginPath(),this.seatCanvas.ctx.drawImage(this.seatIcon.iconSelected,m,x,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight),S.push([w,k]))}(g=this.selectedSeatList).push.apply(g,S)}},checkedRowsOrCols:function(e,t){for(var a,s=[],i=c.seatCanvas.seatWdith+c.seatCanvas.seatMarginRight,h=c.seatCanvas.seatHeight+c.seatCanvas.seatMarginBottom,n=t?e:0,o=t?0:e,r=t?this.checkedShape.rows:this.checkedShape.cols,d=0;d<r;d++){t?o=d:n=d;var p=o*h+c.seatCanvas.paddingTop,l=n*i+c.seatCanvas.paddingLeft,v=!1;c.seatCanvas.ctx.beginPath();for(var u=0;u<c.selectedSeatList.length;u++)if(c.selectedSeatList[u].toString()==[n,o].toString()){v=!0;break}v||(c.seatCanvas.ctx.drawImage(c.seatIcon.iconSelected,p,l,c.seatCanvas.seatWdith,c.seatCanvas.seatHeight),s.push([n,o]))}(a=this.selectedSeatList).push.apply(a,s)},hoverRowsOrCols:function(e,t){var a=this.seatCanvas.seatWdith+this.seatCanvas.seatMarginRight,s=this.seatCanvas.seatHeight+this.seatCanvas.seatMarginBottom;t?(this.hoverPinkBox.width=this.checkedShape.cols*a+2*this.seatCanvas.paddingLeft-this.seatCanvas.seatMarginRight,this.hoverPinkBox.height=this.seatCanvas.seatHeight,this.hoverPinkBox.left=0,this.hoverPinkBox.top=e*s+this.seatCanvas.paddingTop):(this.hoverPinkBox.width=this.seatCanvas.seatWdith,this.hoverPinkBox.height=this.checkedShape.rows*s+2*this.seatCanvas.paddingTop-this.seatCanvas.seatMarginBottom,this.hoverPinkBox.left=e*a+this.seatCanvas.paddingLeft,this.hoverPinkBox.top=0)},cancleSeleced:function(){this.drawSeatCanvas(this.checkedShape)},addSeat:function(){var e=Object(h["a"])(this.checkedShape.seats);this.selectedSeatList.forEach((function(t){e[t[0]][t[1]].status=0})),this.checkedShape.seats=e,this.checkedShape=this.orderSeats(Object(n["a"])({},this.checkedShape)),this.drawSeatCanvas(this.checkedShape),this.$set(this.shapeList,this.checkedShapeIdx,Object(n["a"])({},this.checkedShape))},removeSeat:function(){var e=Object(h["a"])(this.checkedShape.seats);this.selectedSeatList.forEach((function(t){e[t[0]][t[1]].status=-1})),this.checkedShape.seats=e,this.checkedShape=this.orderSeats(Object(n["a"])({},this.checkedShape)),this.drawSeatCanvas(this.checkedShape),this.$set(this.shapeList,this.checkedShapeIdx,Object(n["a"])({},this.checkedShape))},orderSeats:function(e){for(var t=e.seats,a=0,s=0;s<e.rows;s++){for(var i=0,h=0;h<e.cols;h++)-1!=t[s][h].status&&(i+=1);0!=i&&(a+=1);for(var n=0,o=0;o<e.cols;o++){var c=t[s][o];c.rowString=a,-1!=c.status?(n+=1,c.colString=n):c.colString="-1"}}return e},drawSeatCanvas:function(e){var t=this;this.selectedBox={width:0,height:0,top:0,left:0},this.selectedSeatList=[],this.seatCanvas.ctx.clearRect(0,0,this.seatCanvas.width,this.seatCanvas.height);var a=this.seatCanvas.seatWdith+this.seatCanvas.seatMarginRight,s=this.seatCanvas.seatHeight+this.seatCanvas.seatMarginBottom;this.seatCanvas.width=e.cols*a+2*this.seatCanvas.paddingLeft-this.seatCanvas.seatMarginRight,this.seatCanvas.height=e.rows*s+2*this.seatCanvas.paddingTop-this.seatCanvas.seatMarginBottom,this.seatCanvas.dom.width=this.seatCanvas.width,this.seatCanvas.dom.height=this.seatCanvas.height,this.seatCanvas.ctx.strokeStyle="green",this.seatCanvas.ctx.lineWidth=2,this.seatCanvas.ctx.beginPath(),this.seatCanvas.ctx.moveTo(this.seatCanvas.width/2,0),this.seatCanvas.ctx.lineTo(this.seatCanvas.width/2,this.seatCanvas.height),this.seatCanvas.ctx.setLineDash([8,10]),this.seatCanvas.ctx.lineCap="round",this.seatCanvas.ctx.stroke(),this.seatCanvas.ctx.closePath(),this.seatCanvas.ctx.beginPath(),this.seatCanvas.ctx.moveTo(0,this.seatCanvas.height/2),this.seatCanvas.ctx.lineTo(this.seatCanvas.width,this.seatCanvas.height/2),this.seatCanvas.ctx.stroke(),this.seatCanvas.ctx.closePath(),this.$nextTick((function(){for(var i=0;i<e.cols;i++)for(var h=i*a+t.seatCanvas.paddingLeft,n=0;n<e.rows;n++){var o=n*s+t.seatCanvas.paddingTop;t.seatCanvas.ctx.beginPath(),0==e.seats[n][i].status?t.seatCanvas.ctx.drawImage(t.seatIcon.iconShow,h,o,t.seatCanvas.seatWdith,t.seatCanvas.seatHeight):-1==e.seats[n][i].status&&t.seatCanvas.ctx.drawImage(t.seatIcon.iconNone,h,o,t.seatCanvas.seatWdith,t.seatCanvas.seatHeight)}}))},seatCanvasWarpScroll:function(){var e=this.$refs.seatCanvasWarp.scrollTop,t=this.$refs.seatCanvasWarp.scrollLeft;this.seatCanvas.left=-t,this.seatCanvas.top=-e},seatCanvasClick:function(e){for(var t=e.clientX-this.seatCanvasWarp.offsetLeft-this.seatCanvas.left,a=e.clientY-this.seatCanvasWarp.offsetTop-this.seatCanvas.top,s=[t,a],i=this.seatCanvas.seatWdith+this.seatCanvas.seatMarginRight,h=this.seatCanvas.seatHeight+this.seatCanvas.seatMarginBottom,n=[],c=0;c<this.checkedShape.cols;c++)for(var r=c*i+this.seatCanvas.paddingLeft,d=0;d<this.checkedShape.rows;d++){var p=d*h+this.seatCanvas.paddingTop,l=[r+this.seatCanvas.seatWdith/2,p+this.seatCanvas.seatHeight/2];if(o["a"].getDisance1(l,s)<this.seatCanvas.seatWdith/2){n=[d,c],0==this.checkedShape.seats[d][c].status?this.checkedShape.seats[d][c].status=-1:this.checkedShape.seats[d][c].status=0,this.seatCanvas.ctx.beginPath(),0==this.checkedShape.seats[d][c].status?this.seatCanvas.ctx.drawImage(this.seatIcon.iconShow,r,p,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight):-1==this.checkedShape.seats[d][c].status&&this.seatCanvas.ctx.drawImage(this.seatIcon.iconNone,r,p,this.seatCanvas.seatWdith,this.seatCanvas.seatHeight),this.shapeList[this.checkedShapeIdx].seats[d][c].status=this.checkedShape.seats[d][c].status;break}if(0!=n.length)break}},svgInit:function(){var e=this;r=this.$refs.svgWarp,d=r.firstElementChild;var t=this.shapeList.map((function(e){return e.shapeId})),a=d.childNodes,s=0;a.forEach((function(a){if(1==a.nodeType&&"text"!=a.nodeName&&"title"!=a.nodeName){var i=++s;a.setAttribute("id",i);var h=t.indexOf(i+"");-1!=h&&e.shapeList[h].rows>0&&e.shapeList[h].cols>0&&(a.style.fill="rgba(255, 192, 203, 0.74)")}}));var i=d.getAttribute("viewBox").split(" ");this.center={find:!0,x:parseFloat(i[2])/2,y:parseFloat(i[3])/2};var h=this.$refs.content.clientWidth,n=this.$refs.content.clientHeight;d.setAttribute("width",h),d.setAttribute("height",n),d.addEventListener("click",c.shapeCheckedAction),this.seatIconInit()},shapeCheckedAction:function(e){var t=e.target,a=t.nodeName;if("path"!=a&&"rect"!=a&&"polygon"!=a)return!1;var s=[],i=t.getAttribute("id"),h=this.shapeList.map((function(e){return e.shapeId}));if(-1==h.indexOf(i)){var c=null;switch(a){case"path":c=o["a"].pathDecompose([this.center.x,this.center.y],t.getAttribute("d"));break;case"polygon":c=o["a"].polygonDecompose([this.center.x,this.center.y],t.getAttribute("points"));break;case"rect":var r=t.getAttribute("width"),d=t.getAttribute("height"),p=t.getAttribute("x"),l=t.getAttribute("y");c=o["a"].rectDecompose([this.center.x,this.center.y],p,l,r,d);break;default:console.log(a);break}if(null==c)return!1;s=Object(n["a"])({},c,{shapeId:i,rows:0,cols:0,startRow:1,startCol:1,orderRow:0,orderCol:0,seats:[]}),this.toggleCheckedShapeStatus(Object(n["a"])({},s),Object(n["a"])({},this.checkedShape)),this.checkedShapeShow=!0,this.checkedShapePopData=Object(n["a"])({},s)}else{var v=h.indexOf(i);if(s=JSON.parse(JSON.stringify(this.shapeList[v])),this.checkedShape.shapeId!=s.shapeId){this.toggleCheckedShapeStatus(s,Object(n["a"])({},this.checkedShape)),this.checkedShape=s;var u=this.shapeList.map((function(e){return e.shapeId}));return this.checkedShapeIdx=u.indexOf(i),!1}}},toggleCheckedShapeStatus:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&t.shapeId){if(e.shapeId==t.shapeId)return!1;document.getElementById(t.shapeId).style.stroke="#333",document.getElementById(t.shapeId).style.strokeWidth=1}document.getElementById(e.shapeId).style.strokeWidth=16,document.getElementById(e.shapeId).style.stroke="green",document.getElementById("500").setAttribute("style","transform: rotate("+e.angle+"deg);transform-origin: 50% 50%;")},checkedShapeSeatComfrim:function(){this.checkedShapeShow=!1;var e=Object(n["a"])({},this.checkedShapePopData),t=0;if(e.seats=[],0==e.orderRow)for(var a=0;a<e.rows;a++){var s=[];if(0==e.orderCol)for(var i=0;i<e.cols;i++){var h={seatId:t++,status:0,rowString:e.startRow+a,colString:e.startCol+i,level:0};s.push(h)}else for(var o=e.cols-1;o>-1;o--){var c={seatId:t++,status:0,rowString:e.startRow+a,colString:e.startCol+o,level:0};s.push(c)}e.seats.push(s)}else for(var r=e.rows-1;r>-1;r--){var d=[];if(0==e.orderCol)for(var p=0;p<e.cols;p++){var l={seatId:t++,status:0,rowString:e.startRow+r,colString:e.startCol+p,level:0};d.push(l)}else for(var v=e.cols-1;v>-1;v--){var u={seatId:t++,status:0,rowString:e.startRow+r,colString:e.startCol+v,level:0};d.push(u)}e.seats.push(d)}var f=e.shapeId,g=this.shapeList.map((function(e){return e.shapeId})),C=g.indexOf(f);-1!=C?this.$set(this.shapeList,C,Object(n["a"])({},e)):this.shapeList.push(Object(n["a"])({},e)),this.checkedShape=Object(n["a"])({},e),this.checkedShape=this.orderSeats(Object(n["a"])({},this.checkedShape));var S=this.renderList.map((function(e){return e.shapeId})),k=S.indexOf(f);-1!=k?this.$set(this.renderList,k,Object(n["a"])({},e)):this.renderList.push(Object(n["a"])({},e)),this.viewBoxList.push(Object(n["a"])({},e)),document.getElementById(e.shapeId).style.fill="rgba(255, 192, 203, 0.74)"},checkedShapeSeatCancle:function(){console.log("checkedShapeSeatCancle.........."),this.checkedShapeShow=!1,this.toggleCheckedShapeStatus(Object(n["a"])({},this.checkedShape),Object(n["a"])({},this.checkedShapePopData))},seatIconInit:function(){this.seatIcon.iconShow=this.$refs.iconShow,this.seatIcon.iconNone=this.$refs.iconNone,this.seatIcon.iconSelected=this.$refs.iconSelected},judgePageActive:function(){var e,t;"undefined"!==typeof document.hidden?("hidden",t="visibilitychange",e="visibilityState"):"undefined"!==typeof document.mozHidden?("mozHidden",t="mozvisibilitychange",e="mozVisibilityState"):"undefined"!==typeof document.msHidden?("msHidden",t="msvisibilitychange",e="msVisibilityState"):"undefined"!==typeof document.webkitHidden&&("webkitHidden",t="webkitvisibilitychange",e="webkitVisibilityState"),document.addEventListener(t,(function(){var t=this;if("hidden"==document[e]){console.log("hidden............");setTimeout((function(){t.pageVisible=!1}),1e4);document.title=document[e]}else console.log("visible............"),0==this.pageVisible&&(this.pageVisible=!0)}))},saveAction:function(){localStorage.setItem("shapeList",JSON.stringify(this.shapeList)),localStorage.setItem("seatIcon",JSON.stringify(this.seatIcon))},floatTwo:function(e){return Math.floor(1e4*e)/1e4}}},l=p,v=(a("9f26"),a("2877")),u=Object(v["a"])(l,s,i,!1,null,"34ea8d8b",null);t["default"]=u.exports},"9f26":function(e,t,a){"use strict";var s=a("e64d"),i=a.n(s);i.a},e64d:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6cb43366.65033492.js.map